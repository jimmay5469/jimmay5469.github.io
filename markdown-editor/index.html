---
layout: default
title: Realtime Markdown Editor
css: ['markdown-editor.css', 'posts.css']
---
{% raw %}
<div id="emberContainer"></div>
<script type="text/x-handlebars">
  <div class="header-background-image"></div>
  <div class="header">
    <h1 class="title">{{title}}</h1>
  </div>

  <div class="content">
    {{#if preview}}
      {{convert-markdown myMarkdownPost}}
      <button class="togglePreviewButton" {{action togglePreview}}>Edit Post</button>
    {{else}}
      {{markdown-editor value=myMarkdownPost}}
      {{input class="titleInput" value=title}}
      <button class="togglePreviewButton" {{action togglePreview}}>Preview as Post</button>
    {{/if}}
  </div>
</script>
<script type="text/x-handlebars" id="components/markdown-editor">
  <div id="container" class="mdEditor">
    {{textarea id="input" value=value}}
    <div id="output">{{convert-markdown value}}</div>
  </div>
</script>

<script src="/js/jquery.min.js"></script>
<script src="/js/handlebars-v1.1.2.js"></script>
<script src="/js/ember.min.js"></script>
<script src="/js/marked.js"></script>

<script>
  marked.setOptions({
    gfm: true,
    breaks: true
  });

  App = Ember.Application.create({
    rootElement: '#emberContainer'
  });

  Ember.Handlebars.helper('convert-markdown', function(markdown) {
    return new Ember.Handlebars.SafeString(marked(markdown));
  });

  App.ApplicationRoute = Ember.Route.extend({
    model: function() {
      return { 
        preview: false,
        title: 'Realtime Markdown Editor',
        myMarkdownPost: "##Instructions:\n" + 
                         "1. Type markdown in the box on the left.\n" +
                         "2. Watch your markdown render realtime on the right.\n\n" +
                         "For more information visit [A realtime markdown editor, Part 1](/blog/2013/12/10/a-realtime-markdown-editor-part-1/)"
      };
    }
  });

  App.ApplicationController = Ember.ObjectController.extend({
    actions: {
      togglePreview: function() {
        this.toggleProperty('preview');
      }
    }
  });
</script>
{% endraw %}
